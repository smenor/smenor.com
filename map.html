<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Pasedn</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>

    <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>

    <style>
      #map { height: 100vh; width: 100vw; }
    </style>
 </head>
  <body>
    <div id="map"></div>
    <script>
      var map = L.map('map').setView([34.2075, -118.10722], 12);
      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      map.on('click', addMarker);

      var fireLayer = omnivore.kml('https://smenor.com/CA_Perimeters_NIFC_FIRIS_public_view.kml')
        .on('ready', function() {
          fireLayer.eachLayer(function(layer) {
            layer.setStyle({
              "LabelStyle": {
                "color": "00000000",
                "scale": "0"
              },
              "LineStyle": {
                "color": "#ff6e6e6e",
                "width": "0.5",
              },
              "PolyStyle": {
                "color" : "#ff0000",
              }
            });
          });
        })
        .on('error', function() {
            // fired if the layer can't be loaded over AJAX
            // or can't be parsed
            console.log("error");
        })
        .addTo(map);

        var businessLayer = omnivore.geojson("businesses.geojson")
        .on('ready', function() {

        })
        .addTo(map);

        function addMarker(e) {
          var newMarker = new L.marker(e.latlng).addTo(map);
          console.log(e.latlng);
        }

        // var myCustomGroup = L.geoJSON(null, {
        //   style: getStyle
        // });

        // function getStyle(feature) {
        // // if (feature.properties.styleUrl === '#PolyStyleOGreen') {
        //     if (feature.geometry.type === 'LineString') {
        //       return {
        //           color: '#ff6e6e6e',
        //           weight: 4
        //       }
        //     }
        //   // }
        // }

    </script>
  </body>
</html>